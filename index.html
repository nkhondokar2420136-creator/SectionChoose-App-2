<!DOCTYPE html>
<html>
<head>
    <title>University Course Offerings</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://cdn.datatables.net/2.0.7/css/dataTables.dataTables.css" />
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; margin-bottom: 30px; }
        /* Ensure table content doesn't get cut off when scrolling on smaller screens */
        .dataTables_wrapper { overflow-x: auto; }
        #courseTable thead th { white-space: nowrap; }
    </style>
</head>
<body>

    <h1>University Course Offerings</h1>

    <p>Loading courses... Please ensure the file <strong>courses_for_web.csv</strong> is in the same folder.</p>

    <table id="courseTable" class="display" style="width:100%">
        <thead>
            <tr>
                <th>Program</th>
                <th>Code</th>
                <th>Title</th>
                <th>Sec</th>
                <th>Room 1</th>
                <th>Room 2</th>
                <th>Day 1</th>
                <th>Day 2</th>
                <th>Time 1</th>
                <th>Time 2</th>
                <th>Faculty</th>
                <th>Initial</th>
                <th>Credits</th>
            </tr>
        </thead>
        <tbody>
            </tbody>
    </table>

    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script src="https://cdn.datatables.net/2.0.7/js/dataTables.js"></script>
    <script>
        $(document).ready(function() {
            $('#courseTable').DataTable({
                // DataTables configuration to load data from the CSV file
                ajax: {
                    url: 'courses_for_web.csv',
                    dataSrc: '', // For simple CSV/JSON structure
                    dataType: 'text',
                    // Pre-process the CSV text response
                    dataFilter: function(data){
                        // Basic CSV parser to convert CSV text into an array of arrays
                        const lines = data.trim().split('\n');
                        const headers = lines[0].split(',');
                        const dataArray = [];
                        for(let i = 1; i < lines.length; i++){
                            // Basic splitting, assumes no commas within fields, which is safe for this dataset
                            dataArray.push(lines[i].split(','));
                        }
                        // DataTables expects an object with a 'data' property
                        return JSON.stringify({ data: dataArray });
                    }
                },
                columns: [
                    { title: "Program" },
                    { title: "Code" },
                    { title: "Title" },
                    { title: "Sec" },
                    { title: "Room 1" },
                    { title: "Room 2" },
                    { title: "Day 1" },
                    { title: "Day 2" },
                    { title: "Time 1" },
                    { title: "Time 2" },
                    { title: "Faculty" },
                    { title: "Initial" },
                    { title: "Credits" }
                ],
                "paging": true,
                "searching": true,
                "ordering": true,
                "info": true,
                "scrollX": true
            });

            // Hide the "Loading..." message once DataTables is initialized
            $('#courseTable').on('init.dt', function () {
                $('p:contains("Loading courses...")').hide();
            });
        });
    </script>
</body>
</html>
